<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>新联--鞋贸港--大数据</title>
		<script src="./shoestp/js/vue.min.js"></script>
	    <script src="./shoestp/js/qs.js"></script>
	    <script src="./shoestp/js/axios.min.js"></script>
	    <script src="./shoestp/js/element-ui.js"></script>
	    <script src="./shoestp/js/vue-count-to.min.js"></script>
	    <script type="text/javascript" src="./shoestp/echarts/echarts-all.js"></script>
	    <script type="text/javascript" src="./shoestp/echarts/echarts-map.js"></script>
	    <script type="text/javascript" src="./shoestp/echarts/chart/map.js"></script>
	    <script type="text/javascript" src="./shoestp/echarts/chart/china.js"></script>
	    <script type="text/javascript" src="./shoestp/echarts/chart/world.js"></script>
	    <script type="text/javascript" src="./shoestp/component/operation.js"></script>
	    <script type="text/javascript" src="./shoestp/component/register.js"></script>
	    <script type="text/javascript" src="./shoestp/component/pie.js"></script>
	    <script type="text/javascript" src="./shoestp/component/op.js"></script>
	    <script type="text/javascript" src="./shoestp/component/p.js"></script>
	    <script type="text/javascript" src="./shoestp/component/sanjiao.js"></script>
	    <script type="text/javascript" src="./shoestp/component/world.js"></script>
	    <script type="text/javascript" src="./shoestp/component/nameMap.js"></script>
	    <script src="./shoestp/js/jquery-1.11.1.js" type="text/javascript"></script>
	    <script type="text/javascript" src="./shoestp/component/scroll.js"></script>
	    <script type="text/javascript" src="./shoestp/component/orderDetail.js"></script>
	    <script type="text/javascript" src="./shoestp/js/data.js"></script>
		<!-- <script type="text/javascript" src="./shoestp/js/jquery1.42.min.js"></script> -->
		<script type="text/javascript" src="./shoestp/js/jquery.SuperSlide.2.1.1.js"></script>

	    <link rel="stylesheet" type="text/css" href="./shoestp/css/element-ui.css"/>
	    <link rel="stylesheet" type="text/css" href="./shoestp/css/index.css"/>
	     <style>

	    </style>
	</head>
	<body>
		<div id="main" >
			<div class="bg">
				<img src="./shoestp/images/background.png"/>
				<canvas id="canvas"></canvas>
			</div>
			<div class="content">
				<!-- 标题  -->
				<el-row>
					<el-col :xs="24" :sm="12" :lg="3">
						<!-- LOGO -->
						<img  src="./shoestp/images/logo.png" class="logo"/>
					</el-col>
					<el-col :xs="24" :sm="12" :lg="20" style="margin-top: 36px;">
						<div class="nav_floor"></div>
						<div class="right_floor"></div>
						<div style="width:52%;margin:0 15%;">
							<div class="nav" :class="{'selected':flag == 1}" @click="chooseThisNav(1)">
								<div></div>
								<span>平台数据</span>
							</div>
							<div class="nav" :class="{'selected':flag == 2}" @click="chooseThisNav(2)">
								<div></div>
								<span>资金交易</span>
							</div>
							<div class="nav" :class="{'selected':flag == 3}" @click="chooseThisNav(3)">
								<div></div>
								<span>客户资源</span>
							</div>
							<div class="nav" :class="{'selected':flag == 4}" @click="chooseThisNav(4)">
								<div></div>
								<span>商品询盘</span>
							</div>
						</div>

					</el-col>
				</el-row>

				<transition name="el-fade-in-linear">
					<div v-show="flag == 1" class="transition-box">
						<div ref="nav1" v-if="flag == 1" style="padding: 0 39px;margin-top: 34px;">
								<el-row style="margin-left: 150px;">
									<el-col :xs="24" :sm="12" :lg="12">
										<fieldset class="field">
										  <legend class="title">总交易金额(元)</legend>
										</fieldset>
										<scroll :time="money_change_time_num" ref="money_ref" key="all_money" :id="'all_money'" :number="all_money" style="left: -32px;"></scroll>
									</el-col>
									<el-col :xs="24" :sm="12" :lg="12">
										<fieldset class="field">
										  <legend class="title">总注册量(人)</legend>
										</fieldset>
										<scroll :time="register_change_time_num" ref="register_ref" key="all_reg" :id="'all_reg'" :number="all_register" style="right: 112px;"></scroll>
									</el-col>
								</el-row>
								<!-- ECharts --->
								<!-- data -->
							<el-row :gutter="25" style="margin-top:39px;">
								<el-col :xs="24" :sm="24" :lg="12">
									<!-- 地图  -->
									<!-- 自定义标题框 -->
									<div class="my-panel-title-wrap">实时数据统计</div>
									<div class="map">
										<el-row :gutter="6" style="margin-top:24px;">
											<el-col :xs="20" :sm="20" :lg="6.5" :xl="7" class="map_nav">
												<p>今日注册量</p>
										  			<el-row :gutter="39" style="padding-bottom:0px;">
										  				<el-col :xs="20" :sm="20" :lg="8" :xl="7">
										  					<h3 class="detail_h3"><count-to :start-val="old_today_register" :end-val="today_register" :duration="3000" class="card-panel-num"/><ren>人</ren></h3>
										  				</el-col>
										  				<el-col :xs="20" :sm="20" :lg="8" :xl="14" style="float: right;">
										  					<span class="detail_span">昨日注册: <!-- <i :class="{'rise':yesterday_all_register>0,descend:yesterday_all_register<0}"></i> --><br />
										  						<span class="card-panel-num">983</span>
										  						<!-- <count-to :start-val="Math.abs(old_yesterday_all_register)" :end-val="Math.abs(yesterday_all_register)" :duration="3000" class="card-panel-num"/> -->
										  					</span>
										  				</el-col>
										  			</el-row>
											</el-col>
											<el-col :xs="20" :sm="20" :lg="6.5" :xl="7" class="map_nav">
												<p>今日浏览量</p>
										  			<el-row :gutter="39" style="padding-bottom:0px;">
										  				<el-col :xs="20" :sm="20" :lg="8" :xl="7">
										  					<h3 class="detail_h3"><count-to :start-val="old_today_browse" :end-val="today_browse" :duration="3000" class="card-panel-num"/><ren>人</ren></h3>
										  				</el-col>
										  				<el-col :xs="20" :sm="20" :lg="8" :xl="14" style="float: right;">
										  					<span class="detail_span">昨日浏览: 
										  					<span class="card-panel-num">367020</span>
										  					<!-- <i :class="{'rise':yesterday_browse>0,descend:yesterday_browse<0}"></i><br /><count-to :start-val="Math.abs(old_yesterday_browse)" :end-val="Math.abs(yesterday_browse)" :duration="3000" class="card-panel-num"/> --></span>
										  				</el-col>
										  			</el-row>
											</el-col>
											<el-col :xs="20" :sm="20" :lg="6.5" :xl="7" class="map_nav">
												<p>今日成交金额</p>
										  			<el-row :gutter="39" style="padding-bottom:0px;">
										  				<el-col :xs="20" :sm="20" :lg="8" :xl="7">
										  					<h3 class="detail_h3"><count-to :start-val="old_today_success" :end-val="today_success" :duration="3000" class="card-panel-num"/><yuan>元</yuan></h3>
										  				</el-col>
										  				<el-col :xs="20" :sm="20" :lg="8" :xl="14" style="float: right;">
										  					<span class="detail_span">昨日成交:
										  					<span class="card-panel-num">2,185,600</span>
										  					<!--  <i  :class="{'rise':yesterday_all_money>0,descend:yesterday_all_money<0}"></i><br /><count-to :start-val="Math.abs(old_yesterday_all_money)" :end-val="Math.abs(yesterday_all_money)" :duration="3000" class="card-panel-num"/> --></span>
										  				</el-col>
										  			</el-row>
											</el-col>
										</el-row>
										  	<el-container>
											  <el-main>
												 <world style="position: relative;left: -186px;" :size="'1.5'" :id="dataMap.id" :width="1000" :height="300" :type="dataMap.type" :world-mapping="worldMap" :data="dataMap.data"  :data-color="dataMap.dataColor" :data-images="dataMap.dataImages"  ref="mapModel" ></world>
												 <div style="text-align: center;margin-bottom: 25px;margin-top:7px">
													<el-radio label="world" v-model="dataMap.type" @change="chooseThisMap">全部访客地域分布</el-radio>
										  			<el-radio label="china" v-model="dataMap.type" @change="chooseThisMap">供应商地域分布</el-radio>
												</div>
											 </el-main>
											  <el-aside width="28%">
											  	<el-card class="box-card map-data">
												  <div slot="header" class="clearfix">
												    <span style="padding-top: 14px;display: block;">{{dataMap.title}}</span>
												  </div>
												  <div v-for="(key,index) in dataMap.showData" :key="key" class="text item before-have-loop" :class="['before-have-loop_'+index]" style="margin:20px 0">
												    	<span style="display:block;width: 98px;float: left;">{{key.name}}</span>
														<span>{{key.value}}</span>
														<div style="clear:both;"></div>
												  </div>
												</el-card>
												</el-aside>
											</el-container>
									</div>

								</el-col>
								<el-col :xs="24" :sm="24" :lg="12">
									<div class="my-panel-title-wrap">
										运营数据
										<span class="sub-tip">
											2018年
										</span>
									</div>
									<el-row class="operation">
										<div style="height:248px;padding-top: 12px;">
											<operation :max="15000000" :interval="3000000" ref="operationData" :id="'operationData'" :x_axis="business_data.x_axis" :browse_data="business_data.browse_data" :visit_data="business_data.visit_data" :field="business_data.field"></operation>
										</div>
								    </el-row>

								    <el-row :gutter="32" style="margin-top: 28px;">
								      <el-col :xs="24" :sm="24" :lg="8">
								      	<div class="my-panel-title-wrap mini">流量终端</div>
								        <div class="chart-wrapper pie">
									        <div style="width:100%;height:215px;">
									        	<pie :browse_data="pie.browse_data" :title="pie.title" :browse_name="pie.browse_name" :field="pie.field"></pie>
									        </div>
								        </div>
								      </el-col>
								      <el-col :xs="24" :sm="24" :lg="8">
								      	<div class="my-panel-title-wrap mini">流量来源</div>
								        <div class="chart-wrapper pie">
								        	<div style="width:100%;height:215px;">
								        		<pie2 :id="'pie2'" :flow_source="pie2.flow_source" :source_name_array="pie2.source_name_array" :field="pie2.field" :title="pie2.title"></pie2>
								        	</div>
								        </div>
								      </el-col>
								      <el-col :xs="24" :sm="24" :lg="8">
								      	<div class="my-panel-title-wrap mini">商品分类</div>
								        <div class="chart-wrapper pie">
								        	<div style="width:100%;height:215px;">
								          		<pie3 :id="pie3" :browse_data="pie3.browse_data" :title="pie3.title" :browse_name="pie3.browse_name" :field="pie3.field"></pie3>
								        	</div>
								        </div>
								      </el-col>
								    </el-row>

								</el-col>
							</el-row>
						</div>
					</div>
				</transition>

				<transition name="el-fade-in-linear">
				<div v-show="flag == 2" class="transition-box">
				<!-- 资金交易  -->
				<div ref="nav2" v-if="flag == 2" style="margin-top:36px;">
					<fieldset class="outer_fieldset" style="padding:0;background: linear-gradient(to right, rgba(34,50,107, 1), rgba(20,27,62, 1));">
					  <legend class="title" style="width:62%;padding: 0;">
							<fieldset class="field hasbg" style="width:90%;margin:0 auto;transform: perspective(3.5em) rotateX(-1deg);padding:0px;height:180px;">
							  <legend class="title">总成交金额(元)</legend>
							</fieldset>
							<scroll ref="true_money_ref" :id="'his_money'" key="'his_money'" :number="all_true_money" style="left:26%;top:188px;"></scroll>
						  	<div class="step2_note" style="top:32.5%;"></div>
						  	<el-row :gutter="36" class="turnover_today" style="top:30%;">
						  		<el-col :xs="20" :sm="20" :lg="8" :xl="7">
						  			<h3>今日成交额</h3>
						  			<p><count-to :start-val="old_today_success" :end-val="today_success" :duration="3000" class="card-panel-num"/>元</p>
						  		</el-col>
						  		<el-col :xs="20" :sm="20" :lg="8" :xl="7" class="today_rise">
						  			<span><span style="display:block;">昨日成交:</span><span class="card-panel-num" style="display:block;">2,185,600</span><!--  <i :class="{'rise':yesterday_all_money>0,descend:yesterday_all_money<0}"></i><br /><count-to :start-val="Math.abs(old_yesterday_all_money)" :end-val="Math.abs(yesterday_all_money)" :duration="3000" class="card-panel-num"/> --></span>
						  		</el-col>
						  	</el-row>
					  </legend>
					  <!-- <order @newOrder="getNewOrder" :id="'order1'" :orders="order_info" style="margin-left: 51px;position: absolute;top: 28%;"></order>
					  <order :id="'order2'" :orders="order_info" style="left:72%;position: absolute;top: 28%;"></order> -->
					  <el-row :gutter="36" class="nav_info" style="top:41%;">
					  		<el-col :xs="24" :sm="24" :lg="5" style="display: contents;">
					  			<h2 class="sta" style="margin-bottom: 18px;margin-left: 0;">营销数据统计</h2>
					  		</el-col>
							<el-col :xs="24" :sm="24" :lg="5" class="nav_info_detail">
								<p style="margin-bottom:0;">客单价</p>
					  			<el-row :gutter="39" style="padding-bottom:0px;">
					  				<el-col :xs="20" :sm="20" :lg="8" :xl="7">
					  					<h3 class="detail_h3" style="margin-left:0;"><count-to :start-val="customer_unit_price" :end-val="customer_unit_price" :duration="3000" class="card-panel-num"/><ren>元</ren></h3>
					  				</el-col>
					  				<!-- <el-col :xs="20" :sm="20" :lg="16" :xl="14" style="float: right;">
					  					<span class="detail_span" style="margin-left: 18%;">较昨日: <i class="rise"></i><br /><count-to :start-val="658" :end-val="658" :duration="3000" class="card-panel-num"/>元</span>
					  				</el-col> -->
					  			</el-row>
							</el-col>
							<el-col :xs="24" :sm="24" :lg="5" class="nav_info_detail">
								<p style="margin-bottom:0;">转化率</p>
					  			<el-row :gutter="39" style="padding-bottom:0px;">
					  				<el-col :xs="20" :sm="20" :lg="8" :xl="7">
					  					<h3 class="detail_h3" style="margin-left:0;">1.01%</h3>
					  				</el-col>
					  				<!-- <el-col :xs="20" :sm="20" :lg="16" :xl="14" style="float: right;">
					  					<span class="detail_span" style="margin-left: 18%;">较昨日: <i class="rise"></i><br />0.12%</span>
					  				</el-col> -->
					  			</el-row>
							</el-col>
<!--							<el-col :xs="24" :sm="24" :lg="5" class="nav_info_detail">
								<p style="margin-bottom:0;">客流量</p>
					  			<el-row :gutter="39" style="padding-bottom:0px;">
					  				<el-col :xs="20" :sm="20" :lg="8" :xl="7">
					  					<h3 class="detail_h3" style="margin-left:0;"><count-to :start-val="0" :end-val="658" :duration="3000" class="card-panel-num"/><ren>人</ren></h3>
					  				</el-col>
					  				<el-col :xs="20" :sm="20" :lg="16" :xl="14" style="float: right;">
					  					<span class="detail_span" style="margin-left: 18%;">较昨日: <i class="rise"></i><br /><count-to :start-val="0" :end-val="658" :duration="3000" class="card-panel-num"/>人</span>
					  				</el-col>
					  			</el-row>
							</el-col>
							<el-col :xs="24" :sm="24" :lg="5" class="nav_info_detail">
								<p style="margin-bottom:0;">连带率</p>
					  			<el-row :gutter="39" style="padding-bottom:0px;">
					  				<el-col :xs="20" :sm="20" :lg="8" :xl="7">
					  					<h3 class="detail_h3" style="margin-left:0;">0.98%</h3>
					  				</el-col>
					  				<el-col :xs="20" :sm="20" :lg="16" :xl="14" style="float: right;">
					  					<span class="detail_span" style="margin-left: 18%;">较昨日: <i class="rise"></i><br />0.02%</span>
					  				</el-col>
					  			</el-row>
							</el-col>
-->						</el-row>

						<el-row :gutter="20" style="margin-bottom: 37px;">
							<el-col :xs="24" :sm="24" :lg="8" style="margin-top:333px;padding-left:60px;">
								<div class="my-panel-title-wrap mini" style="width:520px;background-position: left;">资金数据</div>
								<div style="width:540px;height:198px;">
									<register :id="'operationData2'" :x_axis="register_data.x_axis" :browse_data="register_data.browse_data" :field="register_data.field"></register>
								</div>
							</el-col>
							<el-col :xs="24" :sm="24" :lg="8" style="margin-top: 136px;">
								<world style="position: relative;top: 0;left: -344px;" :id="'world2'" :height="400" :width="1500" :size="'1.2'" :type="'world'" :world-mapping="worldMap"  :data-color="dataMap.dataColor" :data-images="dataMap.dataImages" :data="dataMap.data"></world>
							</el-col>
							<el-col :xs="24" :sm="24" :lg="4" style="float: right;margin-right: 20px;margin-top:40px;" >
								<div class="my-panel-title-wrap mini" style="background-size: 94%;background-position: left;">月订单排行(前十)</div>
								<div class="sort_bg">
									<div v-for="(key,index) in orderDetail22" :key="key" class="text2 item2 before-have-sort" :class="[index>2?'before-have-sort_other':'before-have-sort_'+index]" style="margin:20px 0">
								    	<span v-if="index>2" class="sort_num">{{index+1}}</span>
								    	<span style="display:block;width: 98px;float: left;">{{key.name}}</span>
										<span style="color: #ff725a;">¥{{key.amt}}</span>
										<div style="clear:both;"></div>
								  	</div>
							  	</div>
							</el-col>
						</el-row>
					</fieldset>

				</div>
				</div>
				</transition>


				<transition name="el-fade-in-linear">
				<div v-show="flag == 3" class="transition-box">
				<!-- 客户资源 -->
				<div ref="nav3" v-if="flag == 3" style="margin-top:36px;">
					<fieldset class="outer_fieldset" style="background: linear-gradient(to right, rgb(34, 50, 107), rgb(20, 27, 62));">
					  <legend class="title" style="width:62%;padding: 0;">
							<fieldset class="field hasbg" style="background: url('./shoestp/images/bg_linear.png') repeat-y center /100%;width:90%;margin:0 auto;transform: perspective(3.5em) rotateX(-1deg);padding-bottom:28px;">
							  <legend class="title">总注册量(人)</legend>
							</fieldset>
							<scroll :time="register_time" :id="'all_reg2'" ref="register_ref" key="'all_reg2'" :number="all_register" style="left:26%;top:178px;"></scroll>
						  	<div class="step3_note" style="top:290px;"></div>
						  	<el-row :gutter="36" class="turnover_today" style="top:270px;">
						  		<el-col :xs="20" :sm="20" :lg="8" :xl="7">
						  			<h3>今日注册量</h3>
						  			<p><count-to :start-val="old_today_register" :end-val="today_register" :duration="3000" class="card-panel-num"/>人</p>
						  		</el-col>
						  		<el-col :xs="20" :sm="20" :lg="8" :xl="7" class="today_rise">
						  			<span>昨日注册: <!-- <i :class="{'rise':yesterday_all_register>0,descend:yesterday_all_register<0}"></i><br /><count-to :start-val="Math.abs(old_yesterday_all_register)" :end-val="Math.abs(yesterday_all_register)" :duration="3000" class="card-panel-num"/> --><span class="card-panel-num">983</span></span>
						  		</el-col>
						  	</el-row>
					  </legend>
					  <order ref="register_detail" :id="'order3'" :width="'115px'" :scroll_num="scroll_num" :time="20*1000" :orders="register_list" style="width:398px;position: absolute;top: 260px;left:105px;"></order>
					  <!-- <order :id="'order4'" :orders="order_info" style="position: absolute;left:70%;top:260px;"></order> -->
					  <el-row>
								<el-col :xs="24" :sm="24" :lg="7" style="margin-top:40px;margin-left: 52px;">
									<el-row>
										<el-col :xs="24" :sm="24" :lg="24">
											<div class="my-panel-title-wrap mini" style="background-size: 106%;background-position: left;">注册数据</div>
											<div style="width:540px;height:198px;">
												<register :id="'operationData3'" :x_axis="register_data2.x_axis" :browse_data="register_data2.browse_data" :field="register_data2.field"></register>
											</div>
										</el-col>
									</el-row>
									<el-row :gutter='15' style="margin-top: 21px;">
										<el-col :xs="24" :sm="24" :lg="12">
											<div class="my-panel-title-wrap mini" style="background-position: left;padding-bottom: 0;">年龄分析</div>
											<div style="width:263px;height:217px;">
												<age :browse_data="age.browse_data"></age>
											</div>
										</el-col>
										<el-col :xs="24" :sm="24" :lg="12">
											<div class="my-panel-title-wrap mini" style="background-position: left;padding-bottom: 0;">男女比例</div>
											<div style="width:263px;height:217px;">
												<pie2 :id="'testpie4'" :flow_source="sex.flow_source" :source_name_array="sex.source_name_array" :field="sex.field" :title="sex.title"></pie2>
											</div>
										</el-col>
									</el-row>

								</el-col>
								<el-col :xs="24" :sm="24" :lg="10" style="margin-top:76px;">


									<el-row :gutter="19">
										<el-col :xs="24" :sm="24" :lg="8" >
											<h2 class="nav4_title" style="padding-left: 48px;line-height: 50px;">实时数据统计</h2>
										</el-col>
										<el-col :xs="24" :sm="24" :lg="16" >
											<el-row :gutter='20' >
												<el-col :xs="24" :sm="12" :lg="12" style="">
													<p style="padding:10px 0 10px 20px ;margin:0;background-color: #110d32;">
														<span style="font-family: PingFang-SC-Heavy;font-size: 16px;font-weight: normal;font-stretch: normal;line-height: 30px;letter-spacing: 0px;color: #4786ce;">
															采购商
														</span>
														<span style="float: right;padding-right: 36px;position: relative;margin-left:24px;font-family: PingFang-SC-Heavy;font-size: 26px;font-weight: normal;font-stretch: normal;line-height: 30px;letter-spacing: 0px;color: #ffffff;">
															<span style="display: inline-block;">
																<count-to :start-val="old_purchase" :end-val="purchase" :duration="3000" class="card-panel-num"/>人
															</span>
															<!-- <i class="rise" style="position: absolute;right: 0;top: 4px;"></i> -->
														</span>
													</p>
												</el-col>
												<el-col :xs="24" :sm="12" :lg="12" style="">
													<p style="padding:10px 0 10px 20px ;margin:0;background-color: #110d32;">
														<span style="font-family: PingFang-SC-Heavy;font-size: 16px;font-weight: normal;font-stretch: normal;line-height: 30px;letter-spacing: 0px;color: #4786ce;">
															供应商
														</span>
														<span style="float: right;padding-right: 36px;position: relative;font-family: PingFang-SC-Heavy;font-size: 26px;font-weight: normal;font-stretch: normal;line-height: 30px;letter-spacing: 0px;color: #ffffff;">
															<span style="display: inline-block;">
																<count-to :start-val="old_supplier" :end-val="supplier" :duration="3000" class="card-panel-num"/>人
															</span>
															<!-- <i class="rise" style="position: absolute;right: 0;top: 4px;"></i> -->
														</span>
													</p>
												</el-col>
											</el-row>
										</el-col>
										<el-col :xs="24" :sm="24" :lg="24">
											<world style="position:relative;left:-344px;" :id="'world3'" :height="400" :width="1500" :size="'1.2'" :type="'world'" :world-mapping="worldMap"  :data-color="dataMap.dataColor" :data-images="dataMap.dataImages" :data="dataMap.data"></world>
										</el-col>
									</el-row>






								</el-col>
								<el-col :xs="24" :sm="24" :lg="5" style="margin-top:20px;float: right;margin-right:-22px;margin-bottom: 43px;">
									<el-row :gutter='15' style="margin-top: 21px;">
										<el-col :xs="24" :sm="24" :lg="24">
											<div class="my-panel-title-wrap mini" style="background-size: 80%;background-position: left;padding-bottom: 0;">流量终端</div>
											<div style="width:294px;height:199px;">
												<pie2 :id="'testpie5'" :flow_source="pie.browse_data" :source_name_array="pie.browse_name" :field="pie.field" :title="pie.title"></pie2>
											</div>
										</el-col>
										<el-col :xs="24" :sm="24" :lg="24" style="margin-top: 20px;">
											<div class="my-panel-title-wrap mini" style="background-size: 80%;background-position: left;padding-bottom: 0;">流量来源</div>
											<div style="width:294px;height:199px;">
												<pie2 :id="'testpie6'" :flow_source="pie2.flow_source" :source_name_array="pie2.source_name_array" :field="pie2.field" :title="pie2.title"></pie2>
											</div>
										</el-col>
									</el-row>
								</el-col>
							</el-row>


					</fieldset>
				</div>

				</div>
				</transition>


				<transition name="el-fade-in-linear">
				<div v-show="flag == 4" v-if="flag == 4" class="transition-box">
				<!-- 商品询盘 -->
				<div ref="nav4">
					<div style="margin: 0 40px;margin-top: 34px;">
					<el-row style="margin-left: 150px;z-index: 999;">
							<el-col :xs="24" :sm="12" :lg="12">
								<fieldset class="field" style="background: url('./shoestp/images/bg_linear.png') repeat-y center /100%">
								  <legend class="title">询盘量(次)</legend>
								</fieldset>
								<scroll :time="inquiry_time" ref="inquiry_ref" :id="'inquiry_count'" :number="all_inquiry" style="left: -28px;"></scroll>
							</el-col>
							<el-col :xs="24" :sm="12" :lg="12">
								<fieldset class="field"  style="background: url('./shoestp/images/bg_linear.png') repeat-y center /100%">
								  <legend class="title">商品数(件)</legend>
								</fieldset>
								<scroll :time="inquiry_change_time_num" :id="'prod_count'" ref="product_ref" :number="all_products" style="right: 94px;"></scroll>
							</el-col>
						</el-row>


						<div style="background: #303f79;position: absolute;top: 72%;width: 95.8%;background: linear-gradient(to right, rgb(34,49,109) , rgb(22,29,65));">
							<el-row>
								<el-col :xs="24" :sm="24" :lg="7" style="margin-top:130px;margin-left: 46px;margin-bottom: 59px;">
									<div class="my-panel-title-wrap mini" style="background-size: 94%;background-position: left;">实时询盘</div>
										<div class="sort_bg" style="padding:0;">
											<order :time="3*1000" :vis="10" :scroll_num="inquiry_scroll_num" :id="'order5'" key="order5"  :orders="inquiry_list" style=""></order>
											<!-- <div v-for="(key,index) in inquiry_data" :key="key" class="text2 item2 before-have-sort" :class="[index>2?'before-have-sort_other':'before-have-sort_'+index]" style="margin:20px 0">
										    	<span v-if="index>2" class="sort_num">{{index+1}}</span>
										    	<span style="display:block;float: left;width: 85px;">{{key.name}}</span>
												<span style="margin-left: 30px;">{{key.prod}}</span>
												<span style="margin-left: 20px;float:right;margin-right:80px">{{key.qty}}次</span>
												<span class="inquiry_amt">{{key.amt}}</span>
												<div style="clear:both;"></div>
										  	</div> -->
									  	</div>
								</el-col>
								<el-col :xs="24" :sm="24" :lg="7" style="margin-top:147px;">
									<!-- <h2 class="nav4_title">实时询盘</h2> -->
									<div style="margin-top:72px;">
										<world style="top: 90px;left: -44px;" :id="'world4'" :height="400" :width="800" :size="'2.5'" :type="'world'" :world-mapping="worldMap"  :data-color="dataMap.dataColor" :data-images="dataMap.dataImages" :data="dataMap.data"></world>
									</div>
								</el-col>
								<el-col :xs="24" :sm="24" :lg="5" style="margin-top:130px;float: right;margin-right:-35px;margin-bottom: 60px;">
									<div class="my-panel-title-wrap mini" style="background-size: 78%;background-position: left;">商品分析</div>
									<div>
										<div style="width:294px;height:211px;">
											<pie3 style="border: solid 1px #303f79;" :id="'pie4'" :browse_data="pie3.browse_data" :title="pie3.title" :browse_name="pie3.browse_name" :field="pie3.field"></pie3>
										</div>
										<div class="prod_detail">
											<div v-for="(key,index) in orderDetail" v-if="index < 5" :key="key" class="text2 item2 before-have-sort" :class="[index>2?'before-have-sort_other':'before-have-sort_'+index]" style="margin:20px 0">
										    	<span v-if="index>2" class="sort_num" style="top: -3px;">{{index+1}}</span>
										    	<span style="display:block;float: left;">{{key.name}}</span>
												<span style="float:right;margin-right:20px;">{{key.amt}}件</span>
												<div style="clear:both;"></div>
										  	</div>
										</div>
									</div>
								</el-col>
							</el-row>
						</div>
						<!-- ECharts --->
						<!-- data -->
					</div>
				</div>
				</div>
				</transition>



			</div>
		</div>

	</body>
	<script>
		var app = new Vue({
			el:"#main",
						data(){
			return{
				flag:1,
				cur:1,
				cur_data:{},
				all_money:_nav1.all_money,					//累计金额
				all_register:_nav1.all_register,			//总注册量
				yesterday_all_money:_nav1.yesterday_all_money,	//较昨日成交额
				yesterday_all_register:_nav1.all_register,		//较昨日注册量
				all_products:_nav1.all_products,			//产品总数
				all_inquiry:_nav1.all_inquiry,				//询盘总数
				today_register:_nav1.today_register,		//今日注册量
				today_success:_nav1.today_success,			//今日成交金额
				customer_unit_price:_nav1.customer_unit_price,	//客单价
				today_browse:_nav1.today_browse,					//今日浏览量
				yesterday_browse : _nav1.yesterday_browse,			//较昨日浏览量
				old_yesterday_all_money:0,							//变化前较昨日成交额
				old_yesterday_all_register:0,						//变化前较昨日注册量
				old_today_register:0,								//变化前注册量
				old_today_success:0,								//变化前成交金额
				old_today_browse:0,									//变化前今日浏览量
				old_yesterday_browse : 0,							//变化前较昨日浏览量
				purchase:_nav1.purchase,
				old_purchase:0,
				supplier:_nav1.supplier,
				old_supplier:0,
				orderDetail22:_nav1.order_list2,
				inquiry_list:[],
				register_list:[],
				
				timer:{},
				
				all_true_money:0,
				
				register_time:0,
				inquiry_time:0,
				all_money_time:0,
				browse_time:0,
				product_time:0,
				today_money_time:0,
				purchase_time:0,
				supplier_time:0,
				
				money_change_time:_nav1.setting.money_change_time,
				register_change_time:_nav1.setting.register_change_time,
				browse_change_time:_nav1.setting.browse_change_time,
				inquiry_change_time:_nav1.setting.inquiry_change_time,
				product_change_time:_nav1.setting.product_change_time,
				today_success_change_time:_nav1.setting.today_success_change_time,
				purchase_change_time:_nav1.setting.purchase_change_time,
				supplier_change_time:_nav1.setting.supplier_change_time,
				
				scroll_num:1,
				inquiry_scroll_num:1,
				
				business_data:{										//浏览量,访问量
		        	x_axis:['1月','2月','3月','4月','5月','6月','7月','8月','9月','10月','11月','12月'],
		        	browse_data:_nav1.browse_data,
		        	visit_data:_nav1.visit_data,
		        	field:['浏览量','访客量']
		        },
		        pie:{										//设备占比
		        	browse_data:_nav1.terminal_browse_data,
		        	browse_name:["PC端","IOS","Android","其他"],
		        	field:['访问来源'],
		        	title:["流量终端"],
		        },
		         pie2:{
					flow_source:_nav1.flow_source,
					source_name_array:["谷歌搜索","百度搜索","直接访问"],
					title:['流量来源'],
					field:["谷歌搜索","百度搜索","直接访问"]
		        },
		         pie3:{
		        	browse_data:_nav1.prod_category,
		        	browse_name:["男鞋","女鞋","童鞋"],
		        	field:['销售量',],
		        	title:["商品分类"],
		        },
		        order_info:_nav1.order_info,	//订单信息
		        orderDetail:_nav1.order_sort,	//订单排行
		        register_data:{					//注册信息
		        	x_axis:['1月','2月','3月','4月','5月','6月','7月','8月','9月','10月','11月','12月'],
		        	browse_data:_nav1.register_data,
		        	field:['成交额']
		        },
		        register_data2:{					//注册信息
		        	x_axis:['1月','2月','3月','4月','5月','6月','7月','8月','9月','10月','11月','12月'],
		        	browse_data:_nav1.register_data,
		        	field:['注册量']
		        },
		        inquiry_data:_nav1.inquiry_data,

		        age:{
		        	browse_data:["0.6720","0.1872","0.1408"],
		        },
		        sex:{
		        	flow_source:["0.6","0.4"],
					source_name_array:["男性","女性"],
					title:['男女比例'],
					field:["男性","女性"]
		        },
		        dataMap:_nav1.dataMap,
		        countryData:_nav1.countryData,
		        chinaData:_nav1.chinaData,
		      	chinaDetail:_nav1.chinaDetail,
	              worldDetail:_nav1.worldDetail,
	              worldMap:countryMap
			}
		},
		watch:{
			all_money_time:{
				handler(newValue, oldValue){
					clearInterval(this.timer['all_money']);
					this.allMoneyInterval();
				},
			},
			/* register_change_time_num:{
				handler(newValue, oldValue){
					clearInterval(self.timer['all_money']);
					this.allMoneyInterval();
				},
			}, */
			browse_time:{
				handler(newValue, oldValue){
					clearInterval(this.timer['browse']);
					this.browseInterval();
				},
			},
			product_time:{
				handler(newValue, oldValue){
					clearInterval(this.timer['products']);
					this.productInterval();
				},
			},
			inquiry_time:{
				handler(newValue, oldValue){
					clearInterval(this.timer['inquiry']);
					this.inquiryInterval();
				},
			},
			today_money_time:{
				handler(newValue, oldValue){
					clearInterval(this.timer['today_money']);
					this.todayMoneyInterval();
				},
			},
			purchase_time:{
				handler(newValue, oldValue){
					clearInterval(this.timer['purchase']);
					this.purchaseInterval();
				},
			},
			supplier_time:{
				handler(newValue, oldValue){
					clearInterval(this.timer['supplier']);
					this.supplierInterval();
				},
			},
		},
		computed:{
			
		},
		mounted(){
			this.cur_data = this.actual_data;
			var self = this;
			self.all_money_time=self.money_change_time_num();
			self.browse_time=self.browse_change_time_num();
			self.product_time=self.product_change_time_num();
			self.today_money_time=self.today_success_change_time_num();
			self.purchase_time=self.purchase_change_time_num();
			self.supplier_time=self.supplier_change_time_num();
			//初始化数据
			self.initData();
			self.register_time = self.register_change_time_num();
			self.inquiry_time = self.inquiry_change_time_num();
			
			//总成交金额定时器
			self.allMoneyInterval();
			//询盘数量定时器
			self.inquiryInterval();
			//商品总数定时器
			 self.productInterval();
			//供应商数量定时器
			self.supplierInterval();
			//采购商数量定时器
			self.purchaseInterval();
			//今日成交额定时器
			self.todayMoneyInterval();
			//浏览量定时器
			self.browseInterval();
			
				//获取询盘列表数据
				axios.get('/temporary/DataInfo_getRegAndConsult', {
					params: {type:1}
					}).then(function (response) {
						var data = response.data.items;
						self.inquiry_list = [];
						for(var i =0;i<data.length;i++){
							var obj = {};
							obj.from = "来自"+data[i].fromName;
							obj.name = data[i].name;
							obj.type = "发起询盘";
							obj.money = data[i].status.split("|")[1];
							var date = new Date();
							obj.state = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();
							self.inquiry_list.push(obj);
						}
				})
				
				//获取注册列表数据
				axios.get('/temporary/DataInfo_getRegAndConsult', {
					params: {type:0}
					}).then(function (response) {
						var data = response.data.items;
						self.register_list = [];
						for(var i =0;i<data.length;i++){
							var obj = {};
							obj.from = "来自"+data[i].fromName;
							obj.name = data[i].name;
							obj.type = data[i].status+"鞋贸港";
							obj.money = '';
							var date = new Date();
							obj.state = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();
							self.register_list.push(obj);
						}
				})
		},
		
		methods:{
			money_change_time_num:function(){
				return this.getRandomFromInterval(this.money_change_time[0],this.money_change_time[1]);
			},
			register_change_time_num:function(){
				return this.getRandomFromInterval(this.register_change_time[0],this.register_change_time[1]);
			},
			browse_change_time_num:function(){
				return this.getRandomFromInterval(this.browse_change_time[0],this.browse_change_time[1]);
			},
			product_change_time_num:function(){
				return this.getRandomFromInterval(this.product_change_time[0],this.product_change_time[1]);
			},
			inquiry_change_time_num:function(){
				return this.getRandomFromInterval(this.inquiry_change_time[0],this.inquiry_change_time[1]);
			},
			today_success_change_time_num:function(){
				return this.getRandomFromInterval(this.today_success_change_time[0],this.today_success_change_time[1]);
			},
			purchase_change_time_num:function(){
				return this.getRandomFromInterval(this.purchase_change_time[0],this.purchase_change_time[1]);
			},
			supplier_change_time_num:function(){
				return this.getRandomFromInterval(this.supplier_change_time[0],this.supplier_change_time[1]);
			},
			initData:function(){
				var self = this;
				axios.get('/temporary/DataData_getDataInfo', {
					params: {pkey:1}
					}).then(function (response) {
					 self.all_money=response.data.data.allMoney; 
					 self.all_register=response.data.data.allRegister;		//总注册量
					 self.yesterday_all_money=response.data.data.yesterdayAllMoney;	//较昨日成交额
					 self.yesterday_all_register=response.data.data.yesterdayAllRegister;		//较昨日注册量
					 self.all_products=response.data.data.allProducts;			//产品总数
					 self.all_inquiry=response.data.data.allInquiry;				//询盘总数
					 self.today_register=response.data.data.todayRegister;	//今日注册量
					 self.today_success=response.data.data.todaySuccess;		//今日成交金额
					 self.today_browse=response.data.data.todayBrowse;				//今日浏览量
					 self.supplier = response.data.data.supplier;
					 self.all_true_money = response.data.data.allTrueMoney;
					 self.purchase = response.data.data.purchase;
					 
					 self.old_yesterday_all_money=response.data.data.yesterdayAllMoney;							//变化前较昨日成交额
					 self.old_yesterday_all_register=response.data.data.yesterdayAllRegister;					//变化前较昨日注册量
					 self.old_today_register=response.data.data.todayRegister;								//变化前注册量
					 self.old_today_success=response.data.data.todaySuccess;								//变化前成交金额
					 self.old_today_browse=response.data.data.todayBrowse;									//变化前今日浏览量
					 self.old_yesterday_browse = response.data.data.yesterdayBrowse;							//变化前较昨日浏览量
				})
			},
			allMoneyInterval:function(){
				//总成交金额定时器
				var self = this;
				self.timer['all_money'] = setInterval(function(){
					axios.get('/temporary/DataData_getDataInfo', {
						params: {
							pkey:1,
							type:4
						}
					}).then(function (response) {
							var val = response.data.data;
							var randomNum = val.allMoney - self.all_money;
							self.all_money = val.allMoney;
							self.old_yesterday_all_money = self.yesterday_all_money;
							self.yesterday_all_money = val.yesterdayAllMoney;
							self.old_today_success = self.today_success;
							self.today_success = val.todaySuccess;
							self.all_money_time = self.money_change_time_num();
							try{
								self.$refs.money_ref.animates();
							}catch(e){
								console.log("未加载金额组件")
							}
					})	
				},self.all_money_time);
			},
			inquiryInterval:function(){
				//询盘数量定时器
				var self = this;
				self.timer['inquiry'] = setInterval(function(){
					axios.get('/temporary/DataData_getDataInfo', {
						params: {
							pkey:1,
							type:7
						}
					}).then(function (response) {
							var randomNum = response.data.data.allInquiry - self.number;
							self.all_inquiry = response.data.data.allInquiry;
							self.inquiry_scroll_num = randomNum;
							self.inquiry_time = self.inquiry_change_time_num();
							try{
								self.$refs.inquiry_ref.animates();
							}catch(e){
								console.log("未加载询盘量组件")
							}
					})	
				},self.inquiry_time); 
			},
			productInterval:function(){
				var self = this;
				self.timer['products'] = setInterval(function(){
					axios.get('/temporary/DataData_getDataInfo', {
						params: {
							pkey:1,
							type:6
						}
					}).then(function (response) {
							var randomNum = response.data.data.allProducts - self.number;
							self.all_products = response.data.data.allProducts;
							self.product_time = self.product_change_time_num();
							try{
								self.$refs.product_ref.animates();
							}catch(e){
								console.log("未加载商品总数组件")
							}
					})	
				},self.product_time); 
			},
			supplierInterval:function(){
				var self = this;
				 self.timer['supplier'] = setInterval(function(){
						axios.get('/temporary/DataData_getDataInfo', {
							params: {
								pkey:1,
								type:2
							}
						}).then(function (response) {
								var val = response.data.data;
								self.scroll_num = val.allRegister - self.all_register;
								self.all_register = val.allRegister;
								self.old_supplier = self.supplier;
								self.supplier = val.supplier;
								self.old_today_register = self.today_register;
								self.today_register = val.todayRegister;
								self.yesterday_all_register = val.yesterdayAllRegister;
								//self.$refs.register_detail.changeStyle();
								self.supplier_time = self.supplier_change_time_num();
								try{
									self.$refs.register_ref.animates();
								}catch(e){
									console.log("未加载注册数量组件")
								}
						})	
					},self.supplier_time); 
			},
			purchaseInterval:function(){
				var self = this;
				 self.timer['purchase'] = setInterval(function(){
						axios.get('/temporary/DataData_getDataInfo', {
							params: {
								pkey:1,
								type:1
							}
						}).then(function (response) {
								var val = response.data.data;
								self.scroll_num = val.allRegister - self.all_register;
								self.all_register = val.allRegister;
								self.old_purchase = self.purchase;
								self.purchase = val.purchase;
								self.old_today_register = self.today_register;
								self.today_register = val.todayRegister;
								self.yesterday_all_register = val.yesterdayAllRegister;
								//self.$refs.register_detail.changeStyle();
								self.purchase_time = self.purchase_change_time_num();
								try{
									self.$refs.register_ref.animates();
								}catch(e){
									console.log("未加载注册数量组件")
								}
						})	
					},self.purchase_time); 
			},
			todayMoneyInterval:function(){
				var self = this;
				self.timer['today_money'] = setInterval(function(){
					axios.get('/temporary/DataData_getDataInfo', {
						params: {pkey:1,type:5}
						}).then(function (response) {
							var val = response.data.data;
							self.all_money = val.allMoney;
							self.old_yesterday_all_money = self.yesterday_all_money;
							self.yesterday_all_money = val.yesterdayAllMoney;
							self.old_today_success = self.today_success;
							self.today_success = val.todaySuccess;
							self.all_true_money = val.allTrueMoney;
							self.today_money_time = self.today_success_change_time_num();
							try{
								self.$refs.money_ref.animates();
								self.$refs.true_money_ref.animates();
							}catch(e){
								console.log("未加载金额组件")
							}
							
					})
				},self.today_money_time);
			},
			browseInterval:function(){
				var self = this;
				self.timer['browse'] = setInterval(function(){
					axios.get('/temporary/DataData_getDataInfo', {
						params: {
							pkey:1,
							type:3
						}
					}).then(function (response) {
							var randomNum = response.data.data.todayBrowse - self.today_browse;
							self.business_data.browse_data[9] += randomNum;
							self.old_yesterday_browse = self.yesterday_browse;
							self.yesterday_browse = response.data.data.yesterdayBrowse;
							self.old_today_browse = self.today_browse;
							self.today_browse = response.data.data.todayBrowse;
							self.browse_time = self.browse_change_time_num();
							if(self.flag == 1){
								self.$refs.operationData.renderOperationalData();
							}
					})	
				},self.browse_time);
			},
			getRandomFromInterval:function(start,end){
				var random = Math.floor(Math.random()*(end-start+1)+start);
				return random;
			},
			getNewOrder:function(val){
				this.order_info.$set(this.order_info.length, val);
			},
			chooseThisNav:function(val){
				var self = this;
				self.flag = val;
				self.initData();
			},
			chooseThisMap:function(val){
	    		var self = this;
	    		self.dataMap.type = val;
	    		if(val == 'world'){
		    		self.dataMap.data = self.worldDetail;
		    		self.dataMap.showData = self.countryData;
		    		self.dataMap.title = '国家排行';
	    		}else{
	    			self.dataMap.data = self.chinaDetail;
	    			self.dataMap.showData = self.chinaData;
	    			self.dataMap.title = '地区排行';
	    		}
	    		self.dataMap.id = 'world';
	    		this.$nextTick(function(){
	    			self.$refs.mapModel.renderConfigure();
	    		})
	    	},
		}
		})
	</script>
	<script src="./shoestp/js/background.js"></script>
</html>
